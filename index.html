<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
  />
  <title>リクエスト支援PWA</title>
  <meta name="theme-color" content="#0b1020" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="apple-touch-icon" href="./assets/icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <style>
    :root { color-scheme: light dark; }
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      background: #0b1020;
      color: #e5e7eb;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
    }

    /* iOSのズーム防止 */
    input, textarea, button, select { font-size: 16px !important; }

    a { color: inherit; text-decoration: none; }

    header {
      position: sticky; top: 0; z-index: 100;
      background: rgba(11,16,32,0.9);
      backdrop-filter: blur(6px);
      border-bottom: 1px solid #1f2937;
      padding: 10px 12px;
      display: flex; align-items: center; justify-content: space-between;
    }
    header h1 {
      margin: 0; font-size: 16px; font-weight: 700; letter-spacing: .02em;
    }
    header .badge { opacity: .7; font-size: 12px; }

    main { padding: 14px; display: grid; gap: 16px; }

    /* 上段：左=入力 / 右=2行分のコピー巨大ボタン */
    .compose {
      display: grid;
      grid-template-columns: 1fr 140px;
      grid-template-rows: auto auto;
      gap: 12px;
      align-items: stretch;
    }
    .compose .input-wrap { grid-column: 1 / 2; grid-row: 1 / 3; }
    .compose textarea {
      width: 100%; height: 180px; resize: vertical;
      background: #0f172a; color: #e5e7eb; border: 1px solid #1f2937;
      border-radius: 14px; padding: 12px 14px; line-height: 1.5;
      outline: none;
    }
    .compose textarea:focus { border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37,99,235,.25) inset; }

    .copy-btn {
      grid-column: 2 / 3; grid-row: 1 / 3; /* 2行分の高さ */
      display: grid; place-content: center;
      border: 1px solid #1f2937; background: #111827; color: #e5e7eb;
      border-radius: 16px; cursor: pointer; min-height: 180px;
      text-align: center; padding: 10px;
      transition: transform .06s ease, background .12s ease, border-color .12s ease;
      user-select: none;
    }
    .copy-btn:active { transform: translateY(1px) scale(.99); background: #0f1628; }
    .copy-btn .line1 { font-weight: 700; font-size: 17px; }
    .copy-btn .line2 { font-size: 12px; opacity: .8; margin-top: 4px; }

    /* クイックリンク（既定＋登録分） */
    .link-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 10px;
    }
    .link-btn {
      display: grid; place-content: center;
      aspect-ratio: 1 / 1; /* 正方形（四角いボタン） */
      border-radius: 16px; border: 1px solid #1f2937;
      background: #0f172a; color: #e5e7eb;
      font-weight: 700; text-align: center; padding: 10px;
      cursor: pointer; user-select: none;
      transition: transform .06s ease, background .12s ease, border-color .12s ease;
      word-break: break-word;
    }
    .link-btn:active { transform: translateY(1px) scale(.99); background:#0f1628; }

    .section-title {
      margin: 12px 2px 4px; font-size: 13px; opacity: .8; letter-spacing:.02em;
    }

    /* 登録フォーム */
    .reg {
      display: grid; gap: 10px;
      grid-template-columns: 1fr 2fr auto;
      align-items: center;
    }
    .reg input[type="text"], .reg input[type="url"] {
      width: 100%;
      background: #0f172a; color: #e5e7eb; border: 1px solid #1f2937;
      border-radius: 12px; padding: 10px 12px; outline: none;
    }
    .reg input:focus { border-color:#2563eb; box-shadow: 0 0 0 3px rgba(37,99,235,.25) inset; }
    .reg button {
      background:#2563eb; color:white; border:0; border-radius:12px; padding:10px 14px;
      font-weight:700; cursor:pointer;
    }
    .reg button:active{ transform: translateY(1px) }

    .list {
      display: grid; gap: 8px;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    }
    .item {
      display: grid; grid-template-columns: 1fr auto;
      gap: 8px; align-items: center;
      border: 1px solid #1f2937; border-radius: 12px; padding: 10px;
      background: #0f172a;
    }
    .item .meta { font-size: 13px; word-break: break-all; }
    .item .actions { display:flex; gap:6px; }
    .item .del {
      border:1px solid #374151; background:#111827; color:#e5e7eb;
      border-radius: 10px; padding: 6px 10px; cursor: pointer;
    }

    footer { padding: 40px 14px; opacity: .6; font-size: 12px; text-align: center; }
    .toast {
      position: fixed; left: 50%; bottom: 20px; transform: translateX(-50%);
      background: #10b981; color: #041016; padding: 10px 12px; border-radius: 10px;
      font-weight: 700; display: none; z-index: 1000;
    }

    /* モバイルでは縦積み */
    @media (max-width: 640px) {
      .compose {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto;
      }
      .copy-btn { grid-column: 1 / 2; grid-row: 2 / 3; min-height: 64px; }
      .reg { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <header>
    <h1>リクエスト支援PWA</h1>
    <span class="badge">PWA</span>
  </header>

  <main>
    <!-- 左：テキスト入力 / 右：2行分のコピー大ボタン -->
    <section class="compose">
      <div class="input-wrap">
        <textarea id="inputText" placeholder="ここにテキストを入力（右端の大ボタンでワンクリックコピー）"></textarea>
      </div>
      <button id="copyBtn" class="copy-btn" aria-label="入力テキストをコピー">
        <div class="line1">ワンタップでコピー</div>
        <div class="line2" id="copySub">未コピー</div>
      </button>
    </section>

    <!-- 既定の四角いボタン群 -->
    <div class="section-title">クイックリンク</div>
    <section id="quickLinks" class="link-grid">
      <!-- 既定ボタンはJSで描画 -->
    </section>

    <!-- 登録エリア -->
    <div class="section-title">URL登録エリア</div>
    <section class="reg" id="regForm">
      <input type="text" id="titleInput" placeholder="ボタンに表示する名前（例：Instagram）" autocomplete="off" />
      <input type="url" id="urlInput" placeholder="URL（https:// から）" inputmode="url" />
      <button id="addBtn">追加</button>
    </section>

    <section class="list" id="linkList">
      <!-- 登録済みURLの一覧（削除/プレビュー） -->
    </section>

    <footer>© 2025</footer>
  </main>

  <div id="toast" class="toast"></div>

  <script src="./db.js"></script>
  <script src="./app.js"></script>
</body>
</html>
